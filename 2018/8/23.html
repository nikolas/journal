<!doctype html>
<html>
    <head>
        <meta charset="utf-8">
        <title>A range input for scientific applications</title>
        <meta name="author" content="Nikolas Nyby">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link href="https://fonts.googleapis.com/css?family=Lora:400,700" rel="stylesheet" type="text/css">
        <link rel="stylesheet" href="../../journal.css" type="text/css" />
        <script src="js/rangeStepInput.js"></script>
    </head>
    <body>

        <article itemscope itemtype="http://schema.org/BlogPosting">
            <header>
                <h1 itemprop="name">A range input for scientific applications</h1>
                <div style="display: none;" itemprop="author">Nikolas Nyby</div>
                <time datetime="2018-08-23" itemprop="datePublished">Thursday, August 23, 2018</time>
            </header>

            <div itemprop="articleBody">
                <p>
                    Here's a range input. Notice how it jumps
                    immediately to the position you click. 
                </p>
                <input type="range" 
                       step="1"
                       min="0"
                       max="100"
                       value="25" />
                <pre>
&lt;input type="range" 
    step="1"
    min="0"
    max="100"
    value="25" /&gt;
                </pre>
                <p>
                    What if you want to fine-tune the value by
                    incrementing and decrementing it by a predictable
                    step?  You can do this fine-tuning by focusing the
                    input and using the arrow keys to adjust the value
                    up and down.
                </p>
                <p>
                    You can make the click event behave in the same
                    way by filtering the input's <code>oninput</code>
                    event, like this:
                </p>
                <input type="range" 
                       step="1"
                       min="0"
                       max="100"
                       value="25"
                       oninput="handleRangeInput(this)" />
<pre>
&lt;input type="range" 
    step="1"
    min="0"
    max="100"
    value="25"
    oninput="handleRangeInput(this)" /&gt;
</pre>
<pre>
var savedValue = 25;

function handleRangeInput(input) {
    var step = new Number(input.step);
    var newVal = new Number(input.value);
    var oldVal = savedValue;
    if (oldVal) {
        input.value = (newVal > oldVal) ?
            oldVal + step : oldVal - step;
    }

    savedValue = new Number(input.value);
}
</pre>
                <p>
                    Notice that clicking right and left of the knob
                    always steps the value by the same increment now.
                    Dragging the knob doesn't behave perfectly, but
                    it's usable. It might be possible to improve the
                    dragging behavior with more code.
                </p>
                <p>
                    This method was pointed out by zcorpan on
                    StackOverflow: <a href="https://stackoverflow.com/a/51988783/173630">https://stackoverflow.com/a/51988783/173630</a>,
                    I've just adapted it for my use case.
                </p>
                <p>
                    If you're using React, this
                    global <code>savedValue</code> variable can be
                    handled by state/props, and connected to the
                    input's value. See the <code>RangeStepInput</code>
                    React component here for the details: <a href="https://github.com/ccnmtl/astro-interactives/pull/57/files">https://github.com/ccnmtl/astro-interactives/pull/57/files</a>
                </p>

            </div>

        </article>
        
        <footer>
            <a href="../../" title="Back">&larr;</a>
        </footer>
    </body>
</html>
